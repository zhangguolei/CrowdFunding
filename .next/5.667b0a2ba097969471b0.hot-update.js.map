{"version":3,"file":"5.667b0a2ba097969471b0.hot-update.js","sources":["webpack:///components/Header.js","webpack:///components/InfoBlock.js","webpack:///./node_modules/@material-ui/core/CircularProgress/index.js","webpack:///./node_modules/@material-ui/core/TextField/index.js","webpack:///./node_modules/@material-ui/core/index.es.js","webpack:///pages/index.js"],"sourcesContent":["import React from 'react';\nimport { AppBar, Toolbar, Typography, Button } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport {Link} from '../routes';\n\nconst styles = {\n  wrapper: {\n    margin: '0 auto',\n    width: '80%',\n    maxWidth: '1200px',\n    display: 'flex',\n  },\n  brand: {\n    borderRight: '2px solid #CCCCCC',\n    paddingRight: '1em',\n    marginRight: '1em',\n  },\n  toolbar: {\n    padding: 0,\n    flex: 1,\n  },\n  flexContainer: {\n    flex: 1,\n  },\n  anchor: {\n    textDecoration: 'none',\n  },\n};\n\nclass Header extends React.Component {\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <AppBar position=\"static\" color=\"default\">\n        <div className={classes.wrapper}>\n          <Toolbar className={classes.toolbar}>\n            <Typography variant=\"title\" color=\"inherit\" className={classes.brand}>\n              众筹 DApp\n            </Typography>\n            <p className={classes.flexContainer}>\n              <a href=\"/\" className={classes.anchor}>\n                <Typography variant=\"title\" color=\"inherit\">\n                  项目列表\n                </Typography>\n              </a>\n            </p>\n            {/* <Button variant=\"raised\" color=\"primary\">\n              发起项目\n            </Button> */}\n            <Link route=\"/projects/create\">\n              <Button variant=\"raised\" color=\"primary\">\n                发起项目\n              </Button>\n            </Link>\n          </Toolbar>\n        </div>\n      </AppBar>\n    );\n  }\n}\n\nexport default withStyles(styles)(Header);\n\n\n// WEBPACK FOOTER //\n// components/Header.js","import React from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = {\n  container: {\n    padding: '0.5em 1em',\n    border: '1px dotted #AAA',\n  },\n  title: {\n    color: '#333',\n    marginBottom: '10px',\n    fontWeight: 'bold',\n  },\n  description: {\n    margin: 0,\n    color: '#666',\n  },\n};\n\nclass InfoBlock extends React.Component {\n  render() {\n    const { classes, title, description } = this.props;\n\n    return (\n      <Grid item md={4}>\n        <div className={classes.container}>\n          <Typography variant=\"title\" color=\"inherit\" className={classes.title}>\n            {title}\n          </Typography>\n          <Typography variant=\"paragraph\" color=\"inherit\" className={classes.description}>\n            {description}\n          </Typography>\n        </div>\n      </Grid>\n    );\n  }\n}\n\nexport default withStyles(styles)(InfoBlock);\n\n\n// WEBPACK FOOTER //\n// components/InfoBlock.js","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _CircularProgress.default;\n  }\n});\n\nvar _CircularProgress = _interopRequireDefault(require(\"./CircularProgress\"));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@material-ui/core/CircularProgress/index.js\n// module id = ./node_modules/@material-ui/core/CircularProgress/index.js\n// module chunks = 5 6","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _TextField.default;\n  }\n});\n\nvar _TextField = _interopRequireDefault(require(\"./TextField\"));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@material-ui/core/TextField/index.js\n// module id = ./node_modules/@material-ui/core/TextField/index.js\n// module chunks = 5 6","/** @license Material-UI v1.5.1\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport * as colors from './colors';\nexport { colors };\nexport { createGenerateClassName, createMuiTheme, createStyles, jssPreset, MuiThemeProvider, withStyles, withTheme } from './styles';\nexport { default as AppBar } from './AppBar';\nexport { default as Avatar } from './Avatar';\nexport { default as Backdrop } from './Backdrop';\nexport { default as Badge } from './Badge';\nexport { default as BottomNavigation } from './BottomNavigation';\nexport { default as BottomNavigationAction } from './BottomNavigationAction';\nexport { default as Button } from './Button';\nexport { default as ButtonBase } from './ButtonBase';\nexport { default as Card } from './Card';\nexport { default as CardActions } from './CardActions';\nexport { default as CardContent } from './CardContent';\nexport { default as CardHeader } from './CardHeader';\nexport { default as CardMedia } from './CardMedia';\nexport { default as Checkbox } from './Checkbox';\nexport { default as Chip } from './Chip';\nexport { default as CircularProgress } from './CircularProgress';\nexport { default as ClickAwayListener } from './ClickAwayListener';\nexport { default as Collapse } from './Collapse';\nexport { default as CssBaseline } from './CssBaseline';\nexport { default as Dialog } from './Dialog';\nexport { default as DialogActions } from './DialogActions';\nexport { default as DialogContent } from './DialogContent';\nexport { default as DialogContentText } from './DialogContentText';\nexport { default as DialogTitle } from './DialogTitle';\nexport { default as Divider } from './Divider';\nexport { default as Drawer } from './Drawer';\nexport { default as ExpansionPanel } from './ExpansionPanel';\nexport { default as ExpansionPanelActions } from './ExpansionPanelActions';\nexport { default as ExpansionPanelDetails } from './ExpansionPanelDetails';\nexport { default as ExpansionPanelSummary } from './ExpansionPanelSummary';\nexport { default as Fade } from './Fade';\nexport { default as FormControl } from './FormControl';\nexport { default as FormControlLabel } from './FormControlLabel';\nexport { default as FormGroup } from './FormGroup';\nexport { default as FormHelperText } from './FormHelperText';\nexport { default as FormLabel } from './FormLabel';\nexport { default as Grid } from './Grid';\nexport { default as GridList } from './GridList';\nexport { default as GridListTile } from './GridListTile';\nexport { default as GridListTileBar } from './GridListTileBar';\nexport { default as Grow } from './Grow';\nexport { default as Hidden } from './Hidden';\nexport { default as Icon } from './Icon';\nexport { default as IconButton } from './IconButton';\nexport { default as Input } from './Input';\nexport { default as InputAdornment } from './InputAdornment';\nexport { default as InputLabel } from './InputLabel';\nexport { default as LinearProgress } from './LinearProgress';\nexport { default as List } from './List';\nexport { default as ListItem } from './ListItem';\nexport { default as ListItemAvatar } from './ListItemAvatar';\nexport { default as ListItemIcon } from './ListItemIcon';\nexport { default as ListItemSecondaryAction } from './ListItemSecondaryAction';\nexport { default as ListItemText } from './ListItemText';\nexport { default as ListSubheader } from './ListSubheader';\nexport { default as Menu } from './Menu';\nexport { default as MenuItem } from './MenuItem';\nexport { default as MenuList } from './MenuList';\nexport { default as MobileStepper } from './MobileStepper';\nexport { default as Modal, ModalManager } from './Modal';\nexport { default as NativeSelect } from './NativeSelect';\nexport { default as NoSsr } from './NoSsr';\nexport { default as Paper } from './Paper';\nexport { default as Popover } from './Popover';\nexport { default as Popper } from './Popper';\nexport { default as Portal } from './Portal';\nexport { default as Radio } from './Radio';\nexport { default as RadioGroup } from './RadioGroup';\nexport { default as RootRef } from './RootRef';\nexport { default as Select } from './Select';\nexport { default as Slide } from './Slide';\nexport { default as Snackbar } from './Snackbar';\nexport { default as SnackbarContent } from './SnackbarContent';\nexport { default as Step } from './Step';\nexport { default as StepButton } from './StepButton';\nexport { default as StepConnector } from './StepConnector';\nexport { default as StepContent } from './StepContent';\nexport { default as StepIcon } from './StepIcon';\nexport { default as StepLabel } from './StepLabel';\nexport { default as Stepper } from './Stepper';\nexport { default as SvgIcon } from './SvgIcon';\nexport { default as SwipeableDrawer } from './SwipeableDrawer';\nexport { default as Switch } from './Switch';\nexport { default as Table } from './Table';\nexport { default as TableBody } from './TableBody';\nexport { default as TableCell } from './TableCell';\nexport { default as TableFooter } from './TableFooter';\nexport { default as TableHead } from './TableHead';\nexport { default as TablePagination } from './TablePagination';\nexport { default as TableRow } from './TableRow';\nexport { default as TableSortLabel } from './TableSortLabel';\nexport { default as Tabs } from './Tabs';\nexport { default as Tab } from './Tab';\nexport { default as TextField } from './TextField';\nexport { default as Toolbar } from './Toolbar';\nexport { default as Tooltip } from './Tooltip';\nexport { default as Typography } from './Typography';\nexport { default as withMobileDialog } from './withMobileDialog';\nexport { default as withWidth } from './withWidth';\nexport { default as Zoom } from './Zoom';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@material-ui/core/index.es.js\n// module id = ./node_modules/@material-ui/core/index.es.js\n// module chunks = 5 6","import React from 'react';\nimport {Grid, Button, Typography, Card, CardContent, CardActions, LinearProgress} from '@material-ui/core';\nimport {Link} from '../routes';\nimport ProjectList from '../libs/projectList';\nimport Project from '../libs/project';\nimport withRoot from '../libs/withRoot';\nimport Layout from '../components/Layout';\nimport InfoBlock from '../components/InfoBlock';\n// import Web3 from 'web3';\nimport web3 from '../libs/web3';\n// export default class Index extends React.Component{\n//     render(){\n//         return <div>Welcome to Ethereum ICO DApp!</div>;\n//     }\n// }\n\nclass Index extends React.Component{\n    // constructor(props){\n    //     super(props);\n    //     this.state = {\n    //         accounts: [],\n    //     };\n\n    //     // this.web3 = new Web3(window.web3.currentProvider);\n    // }\n\n    // async componentDidMount(){\n      \n    //     const accounts = await web3.eth.getAccounts();\n    //     // console.log(accounts);\n    //     const balances = await Promise.all(accounts.map(x => web3.eth.getBalance(x)));\n    //     console.log({accounts, balances});\n\n    //     // this.setState({accounts});\n    //     this.setState({accounts: accounts.map((x, i) => ({account: x, balance: balances[i]}))})\n    // }\n    static async getInitialProps({ req }){\n        const addressList = await ProjectList.methods.getProjects().call();\n        console.log('addressList:', addressList)\n        const summaryList = await Promise.all(\n            addressList.map(address => \n                Project(address).methods.getSummary().call())\n        );\n        console.log({summaryList});\n        const projects = addressList.map((address, i) => {\n            const [description, minInvest, maxInvest, goal, balance, investorCount, paymentCount, owner]\n            = Object.values(summaryList[i]);\n            return {\n                address,\n                description,\n                minInvest,\n                maxInvest,\n                goal,\n                balance, \n                investorCount,\n                paymentCount,\n                owner,\n            };\n        });\n        console.log(projects);\n        return {projects};\n    }\n    render(){\n        // return <Button variant=\"raised\" color=\"primary\">Welcome to Ethereum ICO DApp!</Button>;\n        // const {accounts} = this.state;\n        const {projects} = this.props;\n\n        return(\n            <Layout>\n                {/* <Button variant='raised' color='primary'>\n                    Welcome to Ethereum ICO DApp!\n                </Button> */}\n                {/* <ul>\n                    {accounts.map(x => <li key={x}>{x}</li>)}\n                </ul> */}\n                {/* <ul>\n                    {accounts.map(x => (\n                        <li key={x.account}>\n                            {x.account} : {web3.utils.fromWei(x.balance, 'ether')}\n                        </li>\n                    ))}\n                </ul> */}\n                <Grid container spacing={16}>\n                    {projects.length === 0 && <p>还没有项目，快去创建吧！</p>}\n                    {projects.length > 0 && projects.map(this.renderProject)}\n                </Grid>\n            </Layout>\n        );\n    }\n\n    renderProject(project){\n        const progress = project.balance / project.goal * 100;\n\n        return (\n            <Grid item md={6} key={project.address}>\n                <Card>\n                    <CardContent>\n                        <Typography gutterBottom variant=\"headline\" component=\"h2\">\n                            {project.description}\n                        </Typography>\n                        <LinearProgress style={{margin: '10px 0'}} color=\"primary\" variant=\"determinate\" value={progress} />\n                        {/* <Typography component=\"p\">\n                            {project.address}\n                        </Typography> */}\n                        <Grid container spacing={16}>\n                            <InfoBlock title={`${web3.utils.fromWei(project.goal, 'ether')} ETH`} description=\"募资上限\" />\n                            <InfoBlock title={`${web3.utils.fromWei(project.minInvest, 'ether')} ETH`} description=\"最小投资金额\" />\n                            <InfoBlock title={`${web3.utils.fromWei(project.maxInvest, 'ether')} ETH`} description=\"最大投资金额\" />\n                            <InfoBlock title={`${project.investorCount}人`} description=\"参投人数\" />\n                            <InfoBlock title={`${web3.utils.fromWei(project.balance, 'ether')} ETH`} description=\"已募资金额\" /> \n                        </Grid>\n                    </CardContent>\n                    <CardActions>\n                        <Link route={`/projects/${project.address}`}>\n                            <Button size=\"small\" color=\"secondary\">\n                                立即投资\n                            </Button>\n                        </Link>\n                        <Link route={`/projects/${project.address}`}>\n                            <Button size=\"small\" color=\"primary\">\n                                查看详情\n                            </Button>\n                        </Link>\n                    </CardActions>\n                </Card>\n            </Grid>\n        );\n    }\n}\nexport default withRoot(Index);\n\n\n// WEBPACK FOOTER //\n// pages/index.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAFA;AAIA;AACA;AADA;AAGA;AACA;AADA;AAnBA;AACA;AAuBA;;;;;;;;;;;;;AACA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;;AA9BA;AACA;AAgCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9DA;AACA;AACA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAFA;AAVA;AACA;AAeA;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;AAhBA;AACA;AAkBA;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AA8CA;AACA;AACA;AAFA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAKA;;;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;AA9GA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;AACA;;AACA;AACA;;AADA;AACA;;AACA;AACA;AAAA;AACA;;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;AA7CA;AACA;AAgHA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}